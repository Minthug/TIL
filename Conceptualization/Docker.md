# Docker 란?

도커는 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 
플랫폼이다.
소프트웨어를 컨테이너라는 표준화된 유닛으로 패키징하여, 컨테이너는 
라이브러리, 시스템 도구, 코드 등 소프트웨어 실행에 필요한 모든 것이 
포함되어 있다.

즉, 도커는 컨테이너 환경에서 독립적으로 애플리케이션을 실행할 수 있도록 
컨테이너를 만들고 관리하는 것을 도와주는 도구이다.
사용자는 도커를 통해 애플리케이션을 실행하면 독립적인 환경에서 일관된 
결과를 보장한다.
도커의 핵심 개념은 이미지와 컨테이너다.

# Container란?
컨테이너는 격리된 공간에서 프로세스가 동작하는 기술이다.
기존의 방식인 OS 가상화가 아닌 프로세스를 격리하는 방식으로 동작한다.
Linux에서 프로세스를 격리하는 방식을 Linux Container 라고 한다.

단순히 프로세스를 격리하기 때문에 가볍고 빠르다, 또한 CPU나 메모리는 
프로세스가 필요한 만큼만 추가 사용하여 성능적으로 거의 손실이 없다.

![](https://velog.velcdn.com/images/minthug94_/post/fe7ad4cf-58d1-46dc-9ca3-41726bc94ddf/image.jpeg)

- 서버에 여러 컨테이너를 실행하면 독립적으로 실행되어 VM(Virtual 
Machine)을 사용하는 느낌을 준다.

- 실행 중인 컨테이너에 접속하여 명령어를 입력할 수 있다.

- <code>apt-get</code> 이나 <code>yum</code> 등 운영체제에서 사용하는 
패키지 매니저를 통해 설치할 수 있고, 사용자도 추가하고 프로세스를 
백그라운드로 실행할 수 있다.

- CPU나 메모리 사용량을 제한할 수 있다.

- 호스트의 특정 포트와 연결하거나 호스트의 특정 디렉토리를 내부 디렉토리인 
것처럼 사용이 가능하다.

- 새로운 컨테이너를 만드는데 소요 시간이 매우 짧다.

## Image
컨테이너 실행에 필요한 파일과 설정을 포함하고 있는 것으로 상태값을 가지지 
않고 변하지 않는다.
### 컨테이너는 이미지를 실행한 상태이다.
추가되거나 변하는 값은 컨테이너에 저장되며, 같은 이미지에서 여러 개의 
컨테이너를 생성할 수 있고
컨테이너의 상태가 바뀌거나 삭제되어도 이미지는 변하지 않고 그대로 
남아있다.
도커 이미지는 Docker Hub에 등록하거나 Docker Registry 저장소를 직접 만들어 
관리할 수 있다.

- Docker image의 용량은 보통 수백 MB ~ 수 GB이지만, 가상머신에 비하면 적은 
용량이다.

- 상태값을 가지지 않고 변하지 않는다.

- 하나의 이미지를 통해 여러 컨테이너를 생성할 수 있고, 컨테이너를 삭제해도 
이미지는 변하지 않는다.

- 이미지들은 Docker Hub를 통해 버전 관리 및 배포가 가능

- 도커는 Dockerfile 이라는 파일로 이미지를 만든다.

## Dockerfile
도커 이미지를 만들기 위해 Dockerfile 이라는 파일에 DSL(Domain Specific 
Language) 언어를 사용해 이미지를 생성할 수 있다. 단순 텍스트 파일로 
일반적으로 소스와 함께 관리한다.
서버에서 프로그램을 설치하려고 할 때, Dockerfile을 통해 관리하면 된다.
Dockerfile에서 사용할 수 있는 키워드는 20개 정도가 존재한다

여기서 중요한 건 <code>FROM</code> 과 <code>RUN</code> 이다.
이 두 키워드로도 이미지를 생성할 수 있다.

- FROM
```
FROM <image>:<tag>
FROM ubuntu:16.04
```

베이스 이미지를 지정하며, 반드시 베이스이미지를 지정해야 하며 어떠한 
이미지도 베이스 이미지가 될 수있다.
tag는 버전을 지정하는 것으로 가능하며 구체적인 버전을 지정하는 것이 좋다.

- RUN
```
RUN <command>
RUN bundle install
```

가장 많이 사용하는 구문 중 하나로 말 그대로 명령어를 실행한다.
내부적으로 <code>/bin/sh -c</code> 뒤에 명령어를 실행하는 방식이다.


